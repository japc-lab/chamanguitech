<!-- Combined Summary Table -->
<div class="card card-xl-stretch mb-xl-8">
  <div class="card-header border-0 pt-5">
    <h4 class="card-title align-items-start flex-column">
      <span class="card-label fw-bolder fs-3 mb-1" translate="SALES.LOCAL_SALE.SUMMARY.TITLE"></span>
    </h4>
  </div>
  <div class="card-body py-3">
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <tbody>
          <!-- General Data Rows (Grey background) -->
          <tr class="table-light">
            <td colspan="2" class="fw-semibold" translate="SALES.LOCAL_SALE.SUMMARY.PURCHASED_POUNDS"></td>
            <td class="text-center">{{ purchaseModel?.totalPounds | number: '1.2-2' }}</td>
            <td colspan="2" class="fw-semibold" translate="SALES.LOCAL_SALE.SUMMARY.WHOLE_POUNDS_CALCULATED"></td>
            <td class="text-center">{{ displayTotalWholePounds | number: '1.2-2' }}</td>
          </tr>

          <tr class="table-light">
            <td colspan="2" class="fw-semibold" translate="SALES.LOCAL_SALE.SUMMARY.TRASH_POUNDS"></td>
            <td class="text-center">{{ localSaleModel?.trashPounds | number: '1.2-2' }}</td>
            <td colspan="2" class="fw-semibold" translate="SALES.LOCAL_SALE.SUMMARY.YIELD_PERCENTAGE"></td>
            <td class="text-center">{{ displayTotalYieldPercentage | number: '1.2-2' }}%</td>
          </tr>

          <tr class="table-light">
            <td colspan="2" class="fw-semibold" translate="SALES.LOCAL_SALE.SUMMARY.TAIL_POUNDS_CALCULATED"></td>
            <td class="text-center">{{ displayTotalTailPounds | number: '1.2-2' }}</td>
            <td colspan="2" class="fw-semibold" translate="SALES.LOCAL_SALE.SUMMARY.STATUS"></td>
            <td class="text-center">
              <span class="badge" [ngClass]="{
                'badge-danger': localSaleStatus === 'SIN PAGOS',
                'badge-success': localSaleStatus === 'PAGADO',
                'badge-warning': localSaleStatus === 'PENDIENTE'
              }">
                {{ localSaleStatus }}
              </span>
            </td>
          </tr>

          <tr>
            <td colspan="2" class="fw-semibold orange-color text-center" translate="SALES.LOCAL_SALE.SUMMARY.WHOLE_SHRIMP"></td>
            <td colspan="2" class="fw-semibold blue-color text-center" translate="SALES.LOCAL_SALE.SUMMARY.HEADLESS_SHRIMP"></td>
            <td colspan="2" class="fw-semibold green-color text-center" translate="SALES.LOCAL_SALE.SUMMARY.LOCAL_COMPANY_SHRIMP"></td>
          </tr>

          <tr>
            <td class="fw-semibold orange-color" translate="SALES.LOCAL_SALE.SUMMARY.WHOLE_SHRIMP_POUNDS"></td>
            <td class="text-center orange-color">{{ displayTotalWholePounds | number: '1.2-2' }}</td>
            <td class="fw-semibold blue-color" translate="SALES.LOCAL_SALE.SUMMARY.TAIL_SHRIMP_POUNDS"></td>
            <td class="text-center blue-color">{{ displayTotalTailPoundsOnly | number: '1.2-2' }}</td>
            <td class="fw-semibold green-color" translate="SALES.LOCAL_SALE.SUMMARY.LOCAL_COMPANY_SHRIMP_POUNDS"></td>
            <td class="text-center green-color">{{ displayTotalCompanyPounds | number: '1.2-2' }}</td>
          </tr>

          <tr>
            <td class="fw-semibold orange-color" translate="SALES.LOCAL_SALE.SUMMARY.YIELD_PERCENTAGE"></td>
            <td class="text-center orange-color">{{ getWholeYieldPercentage() | number: '1.2-2' }}%</td>
            <td class="fw-semibold blue-color" translate="SALES.LOCAL_SALE.SUMMARY.YIELD_PERCENTAGE"></td>
            <td class="text-center blue-color">{{ getTailYieldPercentage() | number: '1.2-2' }}%</td>
            <td class="fw-semibold green-color" translate="SALES.LOCAL_SALE.SUMMARY.YIELD_PERCENTAGE"></td>
            <td class="text-center green-color">{{ getCompanyYieldPercentage() | number: '1.2-2' }}%</td>
          </tr>

          <!-- Financial Summary Section -->
          <tr class="table-light">
            <td colspan="6" class="text-center fw-bold fs-5" translate="SALES.LOCAL_SALE.SUMMARY.FINANCIAL_SUMMARY"></td>
          </tr>

          <!-- Estado -->
          <tr>
            <td class="fw-semibold orange-color" translate="SALES.LOCAL_SALE.SUMMARY.STATUS"></td>
            <td class="text-center orange-color">
              <span class="badge" [ngClass]="{
                'badge-danger': wholeStatus === 'SIN PAGOS',
                'badge-success': wholeStatus === 'PAGADO',
                'badge-warning': wholeStatus === 'PENDIENTE'
              }">
                {{ wholeStatus }}
              </span>
            </td>
            <td class="fw-semibold blue-color" translate="SALES.LOCAL_SALE.SUMMARY.STATUS"></td>
            <td class="text-center blue-color">
              <span class="badge" [ngClass]="{
                'badge-danger': tailStatus === 'SIN PAGOS',
                'badge-success': tailStatus === 'PAGADO',
                'badge-warning': tailStatus === 'PENDIENTE'
              }">
                {{ tailStatus }}
              </span>
            </td>
            <td class="fw-semibold green-color" translate="SALES.LOCAL_SALE.SUMMARY.STATUS"></td>
            <td class="text-center green-color">
              <span class="badge" [ngClass]="{
                'badge-danger': companyStatus === 'SIN PAGOS',
                'badge-success': companyStatus === 'PAGADO',
                'badge-warning': companyStatus === 'PENDIENTE'
              }">
                {{ companyStatus }}
              </span>
            </td>
          </tr>

          <!-- Subtotals -->
          <tr>
            <td class="fw-semibold orange-color" translate="SALES.LOCAL_SALE.SUMMARY.WHOLE_SUBTOTAL"></td>
            <td class="text-end orange-color">${{ wholeSubtotal | number: '1.2-2' }}</td>
            <td class="fw-semibold blue-color" translate="SALES.LOCAL_SALE.SUMMARY.TAIL_SUBTOTAL"></td>
            <td class="text-end blue-color">${{ tailSubtotal | number: '1.2-2' }}</td>
            <td class="fw-semibold green-color" translate="SALES.LOCAL_SALE.SUMMARY.COMPANY_SUBTOTAL"></td>
            <td class="text-end green-color">${{ companySubtotal | number: '1.2-2' }}</td>
          </tr>

          <!-- Retencion % -->
          <tr>
            <td class="fw-semibold orange-color" translate="SALES.LOCAL_SALE.SUMMARY.RETENTION_PERCENTAGE_LABEL"></td>
            <td class="text-end orange-color">{{ wholeRetentionPercentage | number: '1.2-2' }}%</td>
            <td class="fw-semibold blue-color" translate="SALES.LOCAL_SALE.SUMMARY.RETENTION_PERCENTAGE_LABEL"></td>
            <td class="text-end blue-color">{{ tailRetentionPercentage | number: '1.2-2' }}%</td>
            <td class="fw-semibold green-color" translate="SALES.LOCAL_SALE.SUMMARY.RETENTION_PERCENTAGE_LABEL"></td>
            <td class="text-end green-color">{{ companyRetentionPercentage | number: '1.2-2' }}%</td>
          </tr>

          <!-- Retencion $ -->
          <tr>
            <td class="fw-semibold orange-color" translate="SALES.LOCAL_SALE.SUMMARY.RETENTION_AMOUNT_LABEL"></td>
            <td class="text-end orange-color">${{ wholeRetentionAmount | number: '1.2-2' }}</td>
            <td class="fw-semibold blue-color" translate="SALES.LOCAL_SALE.SUMMARY.RETENTION_AMOUNT_LABEL"></td>
            <td class="text-end blue-color">${{ tailRetentionAmount | number: '1.2-2' }}</td>
            <td class="fw-semibold green-color" translate="SALES.LOCAL_SALE.SUMMARY.RETENTION_AMOUNT_LABEL"></td>
            <td class="text-end green-color">${{ companyRetentionAmount | number: '1.2-2' }}</td>
          </tr>

          <!-- Castigo o descuento adicional -->
          <tr>
            <td class="fw-semibold orange-color" translate="SALES.LOCAL_SALE.SUMMARY.ADDITIONAL_PENALTY"></td>
            <td class="text-end orange-color">${{ wholeAdditionalPenalty | number: '1.2-2' }}</td>
            <td class="fw-semibold blue-color" translate="SALES.LOCAL_SALE.SUMMARY.ADDITIONAL_PENALTY"></td>
            <td class="text-end blue-color">${{ tailAdditionalPenalty | number: '1.2-2' }}</td>
            <td class="fw-semibold green-color" translate="SALES.LOCAL_SALE.SUMMARY.ADDITIONAL_PENALTY"></td>
            <td class="text-end green-color">${{ companyAdditionalPenalty | number: '1.2-2' }}</td>
          </tr>

          <!-- Neto Final -->
          <tr>
            <td class="fw-semibold orange-color" translate="SALES.LOCAL_SALE.SUMMARY.FINAL_NET"></td>
            <td class="text-end orange-color">${{ wholeFinalSubtotal | number: '1.2-2' }}</td>
            <td class="fw-semibold blue-color" translate="SALES.LOCAL_SALE.SUMMARY.FINAL_NET"></td>
            <td class="text-end blue-color">${{ tailFinalSubtotal | number: '1.2-2' }}</td>
            <td class="fw-semibold green-color" translate="SALES.LOCAL_SALE.SUMMARY.FINAL_NET"></td>
            <td class="text-end green-color">${{ companyFinalSubtotal | number: '1.2-2' }}</td>
          </tr>

          <!-- Valor neto a recibir -->
          <tr class="table-primary">
            <td colspan="2" class="fw-bold fs-5" translate="SALES.LOCAL_SALE.SUMMARY.NET_AMOUNT_TO_RECEIVE"></td>
            <td colspan="4" class="text-center fw-bold fs-5 text-success">
              ${{ netAmountToReceive | number: '1.2-2' }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
