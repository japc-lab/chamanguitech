<div *ngIf="isLoading$ | async" class="text-center py-5">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<div *ngIf="!(isLoading$ | async)" class="card card-custom mb-5 mb-xl-10">
  <div class="row g-0">
    <div class="col-md-4 company-list-section">
      <div class="card-header card-header-stretch">
        <h4 class="card-title mb-3">{{ 'COMPANIES.LIST_DETAILS.COMPANIES_TITLE' | translate }}</h4>
      </div>
      <div class="company-list px-2 pb-2">
        <div *ngFor="let company of companies" (click)="selectCompany(company)"
          [class.selected]="selectedCompany && selectedCompany.id === company.id"
          class="company-list-item d-flex align-items-center justify-content-between">
          <span>
            {{ company.code ? (company.code + ' - ') : '' }}{{ company.name }}
          </span>
          <i class="bi bi-trash text-muted ms-2" (click)="deleteCompany(company, $event)"
            [title]="'COMPANIES.LIST_DETAILS.DELETE_BUTTON_TITLE' | translate"></i>
        </div>
        <!-- Show a message if no companies are available -->
        <div *ngIf="!companies.length" class="text-muted text-center py-4">
          {{ 'COMPANIES.LIST_DETAILS.NO_COMPANIES' | translate }}
        </div>
      </div>
    </div>
    <div class="col-md-8 company-details-section d-flex align-items-center justify-content-center"
      [ngClass]="{'empty-section': !selectedCompany}">
      <ng-container *ngIf="selectedCompany; else noCompanySelected">
        <div class="w-100">
          <div class="card-header card-header-stretch overflow-auto">
            <h3 class="card-title">{{ selectedCompany.name || ('COMPANIES.LIST_DETAILS.COMPANY_DETAILS_TITLE' | translate) }}</h3>
          </div>
          <div class="card-body">
            <form #companyForm="ngForm" (ngSubmit)="onSubmit(companyForm)" class="company-form">
              <!-- Información por Compañía section -->
              <div class="mb-4">
                <h5 class="mb-3 fw-bold">{{ 'COMPANIES.LIST_DETAILS.SECTIONS.COMPANY_INFO' | translate }}</h5>
                <div class="row">
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label required">{{ 'COMPANIES.LIST_DETAILS.FIELDS.NAME' | translate }}</label>
                    <input name="name" class="form-control" [(ngModel)]="selectedCompany.name" required #name="ngModel"
                      [ngClass]="{'is-invalid': name.invalid && name.touched}" />
                    <div class="invalid-feedback" *ngIf="name.invalid && name.touched">
                      {{ 'COMPANIES.LIST_DETAILS.VALIDATIONS.NAME_REQUIRED' | translate }}
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label required">{{ 'COMPANIES.LIST_DETAILS.FIELDS.CODE' | translate }}</label>
                    <input type="text" name="code" class="form-control" [(ngModel)]="selectedCompany.code" required
                      #code="ngModel" [ngClass]="{'is-invalid': code.invalid && code.touched}"
                      (keypress)="validateWholeNumber($event)" />
                    <div class="invalid-feedback" *ngIf="code.invalid && code.touched">
                      {{ 'COMPANIES.LIST_DETAILS.VALIDATIONS.CODE_REQUIRED' | translate }}
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.ADDRESS' | translate }}</label>
                    <input name="address" class="form-control" [(ngModel)]="selectedCompany.address" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label required">{{ 'COMPANIES.LIST_DETAILS.FIELDS.CITY' | translate }}</label>
                    <input name="city" class="form-control" [(ngModel)]="selectedCompany.city" required #city="ngModel"
                      [ngClass]="{'is-invalid': city.invalid && city.touched}" />
                    <div class="invalid-feedback" *ngIf="city.invalid && city.touched">
                      {{ 'COMPANIES.LIST_DETAILS.VALIDATIONS.CITY_REQUIRED' | translate }}
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label required">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MAIN_TELEPHONE' | translate }}</label>
                    <input name="mainTelephone" class="form-control" [(ngModel)]="selectedCompany.mainTelephone"
                      required #mainTelephone="ngModel"
                      [ngClass]="{'is-invalid': mainTelephone.invalid && mainTelephone.touched}" />
                    <div class="invalid-feedback" *ngIf="mainTelephone.invalid && mainTelephone.touched">
                      {{ 'COMPANIES.LIST_DETAILS.VALIDATIONS.MAIN_TELEPHONE_REQUIRED' | translate }}
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.INVOICE_EMAIL' | translate }}</label>
                    <input name="invoiceEmail" class="form-control" [(ngModel)]="selectedCompany.invoiceEmail" />
                  </div>
                </div>
              </div>
              <!-- Información Personal section -->
              <div class="mb-4">
                <h5 class="mb-3 fw-bold">{{ 'COMPANIES.LIST_DETAILS.SECTIONS.PERSONAL_INFO' | translate }}</h5>
                <div class="row">

                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label required">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MAIN_PERSON_NAME' | translate }}</label>
                    <input name="mainPersonName" class="form-control" [(ngModel)]="selectedCompany.mainPersonName"
                      required #mainPersonName="ngModel"
                      [ngClass]="{'is-invalid': mainPersonName.invalid && mainPersonName.touched}" />
                    <div class="invalid-feedback" *ngIf="mainPersonName.invalid && mainPersonName.touched">
                      {{ 'COMPANIES.LIST_DETAILS.VALIDATIONS.MAIN_PERSON_NAME_REQUIRED' | translate }}
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MANAGER_NAME' | translate }}</label>
                    <input name="managerName" class="form-control" [(ngModel)]="selectedCompany.managerName" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MANAGER_CELL_PHONE' | translate }}</label>
                    <input name="managerCellPhone" class="form-control"
                      [(ngModel)]="selectedCompany.managerCellPhone" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MANAGER_EMAIL' | translate }}</label>
                    <input name="managerEmail" class="form-control" [(ngModel)]="selectedCompany.managerEmail" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.COMMERCIAL_ADVISOR_NAME' | translate }}</label>
                    <input name="commercialAdvisorName" class="form-control"
                      [(ngModel)]="selectedCompany.commercialAdvisorName" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.COMMERCIAL_ADVISOR_CELL_PHONE' | translate }}</label>
                    <input name="commercialAdvisorCellPhone" class="form-control"
                      [(ngModel)]="selectedCompany.commercialAdvisorCellPhone" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.COMMERCIAL_ADVISOR_EMAIL' | translate }}</label>
                    <input name="commercialAdvisorEmail" class="form-control"
                      [(ngModel)]="selectedCompany.commercialAdvisorEmail" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.ADDITIONAL_STAFF_NAME' | translate }}</label>
                    <input name="aditionalStaffName" class="form-control"
                      [(ngModel)]="selectedCompany.aditionalStaffName" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.POSITION_IN_COMPANY' | translate }}</label>
                    <input name="positionInCompany" class="form-control"
                      [(ngModel)]="selectedCompany.positionInCompany" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.ADDITIONAL_STAFF_CELL_PHONE' | translate }}</label>
                    <input name="aditionalStaffCellPhone" class="form-control"
                      [(ngModel)]="selectedCompany.aditionalStaffCellPhone" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.ADDITIONAL_STAFF_EMAIL' | translate }}</label>
                    <input name="aditionalStaffEmail" class="form-control"
                      [(ngModel)]="selectedCompany.aditionalStaffEmail" />
                  </div>
                </div>
              </div>
              <!-- Información Camarón section -->
              <div class="mb-4">
                <h5 class="mb-3 fw-bold">{{ 'COMPANIES.LIST_DETAILS.SECTIONS.SHRIMP_INFO' | translate }}</h5>
                <div class="row">
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.PRICE_LIST_BY_EMAIL' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" name="priceListByEmail" class="form-check-input"
                        [(ngModel)]="selectedCompany.priceListByEmail" />
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.PRICE_LIST_BY_MESSAGES' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" name="priceListByMessagesOrWhatsApp" class="form-check-input"
                        [(ngModel)]="selectedCompany.priceListByMessagesOrWhatsApp" />
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.RECEIVES_WHOLE_SHRIMP' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" name="receivesWholeShrimp" class="form-check-input"
                        [(ngModel)]="selectedCompany.receivesWholeShrimp" />
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.RECEIVES_SHRIMP_TAILS' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" name="receivesShrimpTails" class="form-check-input"
                        [(ngModel)]="selectedCompany.receivesShrimpTails" />
                    </div>
                  </div>

                  <!-- Especificaciones de Producto section -->
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MAX_FLAVOR_PERCENT' | translate }}</label>
                    <div class="input-group input-group-sm">
                      <input type="text" id="maxFlavorPercentReceived" name="maxFlavorPercentReceived"
                        [(ngModel)]="selectedCompany.maxFlavorPercentReceived" #maxFlavorPercentReceived="ngModel"
                        class="form-control text-end" (keypress)="validateNumber($event)"
                        (blur)="formatDecimal('maxFlavorPercentReceived')" />
                      <span class="input-group-text">%</span>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MAX_MOULTING_SOFTNESS_PERCENT' | translate }}</label>
                    <div class="input-group input-group-sm">
                      <input type="text" id="maxMoultingAndSoftnessPercentReceived"
                        name="maxMoultingAndSoftnessPercentReceived"
                        [(ngModel)]="selectedCompany.maxMoultingAndSoftnessPercentReceived"
                        #maxMoultingAndSoftnessPercentReceived="ngModel" class="form-control text-end"
                        (keypress)="validateNumber($event)"
                        (blur)="formatDecimal('maxMoultingAndSoftnessPercentReceived')" />
                      <span class="input-group-text">%</span>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.AVG_WHOLE_SHRIMP_PACKAGING_WEIGHT' | translate }}</label>
                    <input type="text" name="avgWholeShrimpPackagingWeight"
                      [(ngModel)]="selectedCompany.avgWholeShrimpPackagingWeight"
                      #avgWholeShrimpPackagingWeight="ngModel" class="form-control" (keypress)="validateNumber($event)"
                      (blur)="formatDecimal('avgWholeShrimpPackagingWeight')" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.AVG_SHRIMP_TAIL_PACKAGING_WEIGHT' | translate }}</label>
                    <input type="text" name="avgShrimpTailPackagingWeight"
                      [(ngModel)]="selectedCompany.avgShrimpTailPackagingWeight" #avgShrimpTailPackagingWeight="ngModel"
                      class="form-control" (keypress)="validateNumber($event)"
                      (blur)="formatDecimal('avgShrimpTailPackagingWeight')" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MAX_LIGHT_FLAVOR_PERCENT' | translate }}</label>
                    <div class="input-group input-group-sm">
                      <input type="text" id="maxLightFlavorPercentAllowedInWholeShrimp"
                        name="maxLightFlavorPercentAllowedInWholeShrimp"
                        [(ngModel)]="selectedCompany.maxLightFlavorPercentAllowedInWholeShrimp"
                        #maxLightFlavorPercentAllowedInWholeShrimp="ngModel" class="form-control text-end"
                        (keypress)="validateNumber($event)"
                        (blur)="formatDecimal('maxLightFlavorPercentAllowedInWholeShrimp')" />
                      <span class="input-group-text">%</span>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MAX_AND_MIN_TIDE_QUOTA' | translate }}</label>
                    <input type="text" name="maxTideQuota" [(ngModel)]="selectedCompany.maxAndMinTideQuotaReceived!.max"
                      [placeholder]="'COMPANIES.LIST_DETAILS.FIELDS.MAX_LABEL' | translate" #maxTideQuota="ngModel" class="form-control" (keypress)="validateNumber($event)"
                      (blur)="formatDecimal('maxTideQuota')" />
                    <input type="text" name="minTideQuota" [(ngModel)]="selectedCompany.maxAndMinTideQuotaReceived!.min"
                      [placeholder]="'COMPANIES.LIST_DETAILS.FIELDS.MIN_LABEL' | translate" #minTideQuota="ngModel" class="form-control" (keypress)="validateNumber($event)"
                      (blur)="formatDecimal('minTideQuota')" />
                  </div>
                </div>
              </div>
              <!-- Información de Pago section -->
              <div class="mb-4">
                <h5 class="mb-3 fw-bold">{{ 'COMPANIES.LIST_DETAILS.SECTIONS.PAYMENT_INFO' | translate }}</h5>
                <div class="row">
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.PAYMENT_METHOD_1' | translate }}</label>
                    <input name="paymentMethod1" class="form-control" [(ngModel)]="selectedCompany.paymentMethod1" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.PAYMENT_METHOD_2' | translate }}</label>
                    <input name="paymentMethod2" class="form-control" [(ngModel)]="selectedCompany.paymentMethod2" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.BANK_1' | translate }}</label>
                    <input name="bank1" class="form-control" [(ngModel)]="selectedCompany.bank1" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.BANK_2' | translate }}</label>
                    <input name="bank2" class="form-control" [(ngModel)]="selectedCompany.bank2" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.FIRST_PAYMENT_PERCENT' | translate }}</label>
                    <input type="number" name="firstPaymentPercent" class="form-control"
                      [(ngModel)]="selectedCompany.firstPaymentPercent" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.DAYS_UNTIL_FIRST_PAYMENT' | translate }}</label>
                    <input type="number" name="daysUntilFirstPayment" class="form-control"
                      [(ngModel)]="selectedCompany.daysUntilFirstPayment" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.SECOND_PAYMENT_PERCENT' | translate }}</label>
                    <input type="number" name="secondPaymentPercent" class="form-control"
                      [(ngModel)]="selectedCompany.secondPaymentPercent" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.DAYS_UNTIL_SECOND_PAYMENT' | translate }}</label>
                    <input type="number" name="daysUntilSecondPayment" class="form-control"
                      [(ngModel)]="selectedCompany.daysUntilSecondPayment" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.THIRD_PAYMENT_PERCENT' | translate }}</label>
                    <input type="number" name="thirdPaymentPercent" class="form-control"
                      [(ngModel)]="selectedCompany.thirdPaymentPercent" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.DAYS_UNTIL_THIRD_PAYMENT' | translate }}</label>
                    <input type="number" name="daysUntilThirdPayment" class="form-control"
                      [(ngModel)]="selectedCompany.daysUntilThirdPayment" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.PAYMENT_RELIABILITY_PERCENT' | translate }}</label>
                    <input type="number" name="paymentReliabilityPercent" class="form-control"
                      [(ngModel)]="selectedCompany.paymentReliabilityPercent" />
                  </div>
                </div>
              </div>
              <!-- Información de Pesca section -->
              <div class="mb-4">
                <h5 class="mb-3 fw-bold">{{ 'COMPANIES.LIST_DETAILS.SECTIONS.FISHING_INFO' | translate }}</h5>
                <div class="row">
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.IS_LOGISTICS_SENT' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" id="isLogisticsSent"
                        [(ngModel)]="selectedCompany.isLogisticsSent" name="isLogisticsSent" />
                      <label class="form-check-label ms-2" for="isLogisticsSent">
                        {{ selectedCompany.isLogisticsSent ? ('COMPANIES.LIST_DETAILS.FIELDS.YES' | translate) : ('COMPANIES.LIST_DETAILS.FIELDS.NO' | translate) }}
                      </label>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.MINIMUM_QUANTITY_RECEIVED' | translate }}</label>
                    <input type="number" name="minimumQuantityReceivedLb" class="form-control"
                      [(ngModel)]="selectedCompany.minimumQuantityReceivedLb" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.CUSTODY_COVERED' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" name="custodyCovered" class="form-check-input"
                        [(ngModel)]="selectedCompany.custodyCovered" />
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.FISHING_INSURANCE_COVERED' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" name="fishingInsuranceCovered" class="form-check-input"
                        [(ngModel)]="selectedCompany.fishingInsuranceCovered" />
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.COMPANY_CLASSIFIER_KNOWN' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" name="companyClassifierKnown" class="form-check-input"
                        [(ngModel)]="selectedCompany.companyClassifierKnown" />
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.PERSON_CAN_BE_SENT_FOR_CLASSIFICATION' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" name="personCanBeSentForClassification" class="form-check-input"
                        [(ngModel)]="selectedCompany.personCanBeSentForClassification" />
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.EXTRA_INFORMATION' | translate }}</label>
                    <input name="bank2" class="form-control" [(ngModel)]="selectedCompany.extraInformation" />
                  </div>

                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.IS_LOGISTICS_PAYED' | translate }}</label>
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" id="isLogisticsPayed"
                        [(ngModel)]="selectedCompany.isLogisticsPayed" name="isLogisticsPayed"
                        (change)="onLogisticsPayedChange()" />
                      <label class="form-check-label ms-2" for="isLogisticsPayed">
                        {{ selectedCompany.isLogisticsPayed ? ('COMPANIES.LIST_DETAILS.FIELDS.YES' | translate) : ('COMPANIES.LIST_DETAILS.FIELDS.NO' | translate) }}
                      </label>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row" *ngIf="selectedCompany.isLogisticsPayed">
                    <label class="form-label required">{{ 'COMPANIES.LIST_DETAILS.FIELDS.WHOLE_AMOUNT_TO_PAY' | translate }}</label>
                    <div class="input-group">
                      <span class="input-group-text">$</span>
                      <input type="text" id="wholeAmountToPay" name="wholeAmountToPay"
                        [(ngModel)]="selectedCompany.wholeAmountToPay" #wholeAmountToPay="ngModel"
                        [ngClass]="{'is-invalid': wholeAmountToPay.invalid && wholeAmountToPay.touched}"
                        class="form-control form-control-sm text-end" required (keypress)="validateNumber($event)"
                        (blur)="formatDecimal('wholeAmountToPay')" />
                      <div class="invalid-feedback" *ngIf="wholeAmountToPay.invalid && wholeAmountToPay.touched">
                        {{ 'COMPANIES.LIST_DETAILS.VALIDATIONS.WHOLE_AMOUNT_TO_PAY_REQUIRED' | translate }}
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3 form-row" *ngIf="selectedCompany.isLogisticsPayed">
                    <label class="form-label required">{{ 'COMPANIES.LIST_DETAILS.FIELDS.TAIL_AMOUNT_TO_PAY' | translate }}</label>
                    <div class="input-group">
                      <span class="input-group-text">$</span>
                      <input type="text" id="tailAmountToPay" name="tailAmountToPay"
                        [(ngModel)]="selectedCompany.tailAmountToPay" #tailAmountToPay="ngModel"
                        [ngClass]="{'is-invalid': tailAmountToPay.invalid && tailAmountToPay.touched}"
                        class="form-control form-control-sm text-end" required (keypress)="validateNumber($event)"
                        (blur)="formatDecimal('tailAmountToPay')" />
                      <div class="invalid-feedback" *ngIf="tailAmountToPay.invalid && tailAmountToPay.touched">
                        {{ 'COMPANIES.LIST_DETAILS.VALIDATIONS.TAIL_AMOUNT_TO_PAY_REQUIRED' | translate }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Detalles Adicionales de la Empresa section -->
              <div class="mb-4">
                <h5 class="mb-3 fw-bold">{{ 'COMPANIES.LIST_DETAILS.SECTIONS.ADDITIONAL_DETAILS' | translate }}</h5>
                <div class="row">
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.CLASSIFICATION_QUALITY' | translate }}</label>
                    <select name="classificationQuality" class="form-control"
                      [(ngModel)]="selectedCompany.classificationQuality">
                      <option [ngValue]="undefined">{{ 'COMPANIES.LIST_DETAILS.VALIDATIONS.SELECT_OPTION' | translate }}</option>
                      <option value="BAD">{{ 'COMPANIES.LIST_DETAILS.FIELDS.CLASSIFICATION_QUALITY_BAD' | translate }}</option>
                      <option value="GOOD">{{ 'COMPANIES.LIST_DETAILS.FIELDS.CLASSIFICATION_QUALITY_GOOD' | translate }}</option>
                      <option value="EXCELLENT">{{ 'COMPANIES.LIST_DETAILS.FIELDS.CLASSIFICATION_QUALITY_EXCELLENT' | translate }}</option>
                    </select>
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.ARE_PAYMENTS_ON_TIME' | translate }}</label>
                    <input type="checkbox" name="arePaymentsOnTime" class="form-check-input ms-2"
                      [(ngModel)]="selectedCompany.arePaymentsOnTime" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.OBSERVATION_1' | translate }}</label>
                    <input name="observation1" class="form-control" [(ngModel)]="selectedCompany.observation1" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.OBSERVATION_2' | translate }}</label>
                    <input name="observation2" class="form-control" [(ngModel)]="selectedCompany.observation2" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.OBSERVATION_3' | translate }}</label>
                    <input name="observation3" class="form-control" [(ngModel)]="selectedCompany.observation3" />
                  </div>
                  <div class="col-md-6 mb-3 form-row">
                    <label class="form-label">{{ 'COMPANIES.LIST_DETAILS.FIELDS.OBSERVATION_4' | translate }}</label>
                    <input name="observation4" class="form-control" [(ngModel)]="selectedCompany.observation4" />
                  </div>
                </div>
              </div>

              <div class="mb-4">
                <div class="row">
                  <div class="col-12">
                    <div class="d-flex justify-content-end">
                      <button type="submit" class="btn btn-primary" [disabled]="companyForm.invalid">
                        {{ 'BUTTONS.SAVE' | translate }}
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </ng-container>
      <ng-template #noCompanySelected>
        <div class="w-100 text-center text-muted py-5 no-company-selected-message">
          <i class="bi bi-building" style="font-size: 2rem;"></i>
          <div class="mt-3">{{ 'COMPANIES.LIST_DETAILS.SELECT_COMPANY_MESSAGE' | translate }}</div>
        </div>
      </ng-template>
    </div>
  </div>
</div>
