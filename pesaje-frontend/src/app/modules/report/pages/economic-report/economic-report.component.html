<!-- First Section: Search Info -->
<div class="card card-xl-stretch mb-xl-8">
  <div class="card-header border-0 pt-5">
    <h4 class="card-title align-items-start flex-column">
      <span class="card-label fw-bolder fs-3 mb-1" translate="REPORTS.ECONOMIC.SEARCH_TITLE"></span>
    </h4>
  </div>

  <div class="card-body py-3">
    <div class="d-flex flex-column">
      <div class="d-flex align-items-center gap-4">
        <!-- Control Number Input -->
        <input type="text" id="controlNumber" name="controlNumber" class="form-control form-control-sm text-end"
          placeholder="CO-0" style="max-width: 180px" [(ngModel)]="controlNumber" />

        <!-- Search Button -->
        <button class="btn btn-outline-primary btn-sm d-flex align-items-center gap-2" (click)="loadReportInfo()">
          <i class="bi bi-search"></i> <span translate="REPORTS.ECONOMIC.SEARCH_BUTTON"></span>
        </button>
      </div>

      <!-- Required Message -->
      <div *ngIf="searchSubmitted && !controlNumber" class="text-danger mt-1 ms-1 small">
        {{ 'REPORTS.ECONOMIC.CONTROL_NUMBER_REQUIRED' | translate }}
      </div>
    </div>

  </div>

</div>
<!-- end::First Section: Search Info -->

<!-- Second Section: Econocmic Report -->
<div *ngIf="economicReportModel" class="card card-xl-stretch mb-xl-8 mt-2">
  <!-- Card Header -->
  <div class="card-header border-0 pt-5">
    <h3 class="card-title fw-bolder fs-2 mb-1" translate="REPORTS.ECONOMIC.TITLE"></h3>
  </div>

  <!-- Card Body -->
  <div class="card-body pt-0 fs-6">
    <!-- Purchase Info -->
    <div class="table-responsive">
      <table class="table table-bordered align-middle mb-6">
        <tbody>
          <tr>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_INFO.CLIENT_NAME"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.clientName }}</td>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_INFO.CONTROL_NUMBER"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.controlNumber }}</td>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_INFO.PURCHASE_DATE"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.purchaseDate | date: 'dd/MM/yyyy' }}</td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.SHRIMP_FARM_LOCATION"></td>
            <td>{{ economicReportModel.purchase.shrimpFarmLocation }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.COMPANY_NAME"></td>
            <td>{{ economicReportModel.purchase.companyName }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.AVERAGE_GRAM"></td>
            <td>{{ economicReportModel.purchase.averageGram | number:'1.2-2' }}</td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.SHRIMP_FARM"></td>
            <td>{{ economicReportModel.purchase.shrimpFarm }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.PERIOD"></td>
            <td>{{ economicReportModel.purchase.period }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.INVOICE_NUMBER"></td>
            <td>{{ economicReportModel.purchase.invoiceNumber }}</td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.RESPONSIBLE_BUYER"></td>
            <td>{{ economicReportModel.purchase.responsibleBuyer }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.BROKER_NAME"></td>
            <td>{{ economicReportModel.purchase.brokerName }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.STATUS"></td>
            <td>{{ purchaseStatus }}</td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.WEIGHT_SHEET_NUMBER_PURCHASE"></td>
            <td>{{ weightSheetNumberPurchase }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.WEIGHT_SHEET_NUMBER_SALE"></td>
            <td>{{ weightSheetNumberSale }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.PURCHASE_INFO.LOGISTICS_SHEET_NUMBER"></td>
            <td>{{ logisticsSheetNumber }}</td>
          </tr>
        </tbody>
      </table>
    </div>


    <!-- VENTAS -->
    <h5 class="fw-bold border-bottom border-gray-400 pb-2" translate="REPORTS.ECONOMIC.SECTIONS.SALES"></h5>
    <div class="table-responsive">
      <!-- Company Sale -->
      <table class="table table-bordered align-middle mb-6" *ngIf="economicReportModel.isCompanySale; else localSale">
        <tbody>
          <tr>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.RECEPTION_DATE"></td>
            <td>{{ economicReportModel.sale.receptionDate | date: 'dd/MM/yyyy' }}</td>
            <td class="bg-light fw-bold" style="width: 15%" translate="REPORTS.ECONOMIC.SALE_INFO.NET_POUNDS_RECEIVED"></td>
            <td style="width: 18%">{{ economicReportModel.sale.netPoundsReceived | number:'1.2-2' }}
            </td>
            <td class="bg-light fw-bold" style="width: 15%" translate="REPORTS.ECONOMIC.SALE_INFO.TOTAL_TO_RECEIVE"></td>
            <td class="text-end" style="width: 18%">{{ economicReportModel.sale.totalToReceive | number:'1.2-2' }}</td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.WHOLE_POUNDS_RECEIVED"></td>
            <td>{{ economicReportModel.sale.wholePoundsReceived | number:'1.2-2' }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.TRASH_POUNDS"></td>
            <td>{{ economicReportModel.sale.trashPounds | number:'1.2-2' }}</td>
            <td colspan="2"></td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.PERFORMANCE"></td>
            <td>{{ economicReportModel.sale.performance | number:'1.2-2' }}%</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.AVERAGE_BATCH_GRAMS"></td>
            <td>{{ economicReportModel.sale.averageBatchGrams | number:'1.2-2' }}</td>
            <td colspan="2"></td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.WEIGHT_SHEET_NUMBER"></td>
            <td>{{ weightSheetNumberSale }}</td>
            <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.BATCH"></td>
            <td>{{ economicReportModel.sale.batch }}</td>
            <td colspan="2"></td>
          </tr>
        </tbody>
      </table>

      <!-- Local Sale -->
      <ng-template #localSale>
        <table class="table table-bordered align-middle mb-6">
          <tbody>
            <tr>
              <td class="bg-light fw-bold" style="width: 15%" translate="REPORTS.ECONOMIC.SALE_INFO.SALE_DATE"></td>
              <td style="width: 18%">{{ economicReportModel.sale.saleDate | date: 'dd/MM/yyyy' }}</td>
              <td class="bg-light fw-bold" style="width: 15%" translate="REPORTS.ECONOMIC.SALE_INFO.TOTAL_PROCESSED_POUNDS"></td>
              <td style="width: 18%">{{ economicReportModel.sale.totalProcessedPounds | number:'1.2-2'
                }}</td>
              <td class="bg-light fw-bold" style="width: 15%" translate="REPORTS.ECONOMIC.SALE_INFO.TOTAL_TO_RECEIVE"></td>
              <td class="text-end" style="width: 18%">{{ economicReportModel.sale.totalToReceive | number:'1.2-2' }}
              </td>
            </tr>
            <tr>
              <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.WHOLE_TOTAL_POUNDS"></td>
              <td>{{ economicReportModel.sale.wholeTotalPounds | number:'1.2-2' }}</td>
              <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.TAIL_TOTAL_POUNDS"></td>
              <td>{{ economicReportModel.sale.tailTotalPounds | number:'1.2-2' }}</td>
              <td colspan="2"></td>
            </tr>
            <tr>
              <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.WHOLE_REJECTED_POUNDS"></td>
              <td>{{ economicReportModel.sale.wholeRejectedPounds | number:'1.2-2' }}</td>
              <td class="bg-light fw-bold" translate="REPORTS.ECONOMIC.SALE_INFO.TRASH_POUNDS_SHORT"></td>
              <td>{{ economicReportModel.sale.trashPounds | number:'1.2-2' }}</td>
              <td colspan="2"></td>
            </tr>
          </tbody>
        </table>
      </ng-template>
    </div>



    <!-- COMPRAS -->
    <h5 class="fw-bold border-bottom border-gray-400 pb-2" translate="REPORTS.ECONOMIC.SECTIONS.PURCHASES"></h5>
    <div class="table-responsive">
      <table class="table table-bordered align-middle mb-6">
        <tbody>
          <tr>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.AVERAGE_GRAM"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.averageGram | number:'1.2-2' }}</td>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.AVERAGE_GRAMS_2"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.averageGrams2 | number:'1.2-2' }}</td>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.TOTAL_AGREED"></td>
            <td class="text-end" style="width: 18%;">{{ economicReportModel.purchase.totalAgreed | number:'1.2-2' }}
            </td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.PRICE"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.price | number:'1.2-2' }}</td>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.PRICE_2"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.price2 | number:'1.2-2' }}</td>
            <td colspan="2"></td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.POUNDS"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.pounds | number:'1.2-2' }}</td>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.POUNDS_2"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.pounds2 | number:'1.2-2' }}</td>
            <td colspan="2"></td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.TOTAL_POUNDS_PURCHASED"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.totalPoundsPurchased | number:'1.2-2' }}</td>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.TOTAL_TO_PAY"></td>
            <td style="width: 18%;">{{ economicReportModel.purchase.totalToPay | number:'1.2-2' }}</td>
            <td colspan="2"></td>
          </tr>
          <tr>
            <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.PURCHASE_DETAILS.WEIGHT_SHEET_NUMBER"></td>
            <td style="width: 18%;">{{ weightSheetNumberPurchase }}</td>
            <td colspan="4"></td>
          </tr>
        </tbody>
      </table>
    </div>


    <!-- LOGISTICA -->
    <h5 class="fw-bold border-bottom border-gray-400 pb-2" translate="REPORTS.ECONOMIC.SECTIONS.LOGISTICS"></h5>
    <div class="table-responsive" *ngIf="economicReportModel?.logistics">
      <!-- If logistics is an array -->
      <ng-container *ngIf="!economicReportModel.isCompanySale; else singleLogistics">
        <div *ngFor="let logistics of logisticsArray" class="mb-6">
          <table class="table table-bordered align-middle">
            <tbody>
              <tr>
                <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.TYPE"></td>
                <td style="width: 18%;">{{ logisticsTypeLabel(logistics.type) }}</td>
                <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.PERSONNEL_EXPENSES"></td>
                <td style="width: 18%;">{{ logistics.personnelExpenses | number:'1.2-2' }}</td>
                <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.TOTAL_TO_PAY"></td>
                <td class="text-end" style=" width: 18%;">{{ logistics.totalToPay | number:'1.2-2' }}</td>
              </tr>
              <tr>
                <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.LOGISTICS_DATE"></td>
                <td style="width: 18%;">{{ logistics.logisticsDate | date:'dd/MM/yyyy' }}</td>
                <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.PRODUCT_SUPPLY_EXPENSES"></td>
                <td style="width: 18%;">{{ logistics.productAndSupplyExpenses | number:'1.2-2' }}</td>
                <td colspan="2"></td>
              </tr>
              <tr>
                <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.LOGISTICS_SHEET_NUMBER"></td>
                <td style="width: 18%;">{{ logistics.logisticsSheetNumber }}</td>
                <td colspan="4"></td>
              </tr>
              <tr>
                <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.PRICE_PER_POUND"></td>
                <td style="width: 18%;">
                  {{ (logistics.totalToPay / economicReportModel.purchase.pounds) | number:'1.2-4' }}
                </td>
                <td colspan="4"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </ng-container>

      <!-- If logistics is a single object -->
      <ng-template #singleLogistics>
        <table class="table table-bordered align-middle mb-6" *ngIf="singleLogisticsObject">
          <tbody>
            <tr>
              <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.TYPE"></td>
              <td style="width: 18%;">{{ logisticsTypeLabel(singleLogisticsObject.type) }}</td>
              <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.PERSONNEL_EXPENSES"></td>
              <td style="width: 18%;">{{ singleLogisticsObject.personnelExpenses | number:'1.2-2' }}</td>
              <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.TOTAL_TO_PAY"></td>
              <td class="text-end" style="width: 18%;">{{ singleLogisticsObject.totalToPay | number:'1.2-2' }}</td>
            </tr>
            <tr>
              <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.LOGISTICS_DATE"></td>
              <td style="width: 18%;">{{ singleLogisticsObject.logisticsDate | date:'dd/MM/yyyy' }}</td>
              <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.PRODUCT_SUPPLY_EXPENSES"></td>
              <td style="width: 18%;">{{ singleLogisticsObject.productAndSupplyExpenses | number:'1.2-2' }}</td>
              <td colspan="2"></td>
            </tr>
            <tr>
              <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.LOGISTICS_SHEET_NUMBER"></td>
              <td style="width: 18%;">{{ singleLogisticsObject.logisticsSheetNumber }}</td>
              <td colspan="4"></td>
            </tr>
            <tr>
              <td class="bg-light fw-bold" style="width: 15%;" translate="REPORTS.ECONOMIC.LOGISTICS_INFO.PRICE_PER_POUND"></td>
              <td style="width: 18%;">
                {{ (singleLogisticsObject.totalToPay / economicReportModel.purchase.pounds) | number:'1.2-4' }}
              </td>
              <td colspan="4"></td>
            </tr>
          </tbody>
        </table>
      </ng-template>

      <!-- UTILIDAD BRUTA -->
      <h5 class="fw-bold text-end mt-4">
        <span translate="REPORTS.ECONOMIC.SECTIONS.GROSS_PROFIT"></span>
        <span class="ms-2" [ngClass]="economicReportModel.grossProfit < 0 ? 'text-danger' : 'text-primary'">
          {{ economicReportModel.grossProfit | number:'1.2-2' }}
        </span>
      </h5>
    </div>

  </div>


  <!-- end::Second Section: Econocmic Report -->
